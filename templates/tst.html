<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
    <title>Test =)</title>
</head>
<body>
        <div id="container" style="margin: 2em;">
            <select id="select1" style="width:200px;" onchange="selectAddress(this)">
                <option class="1">Маяковского</option>
                <option class="2">Мечникова</option>
                <option class="3">Каштанова</option>
            </select>
            <select id="select2">
                <option class="1#1">Вода-m</option>
                <option class="1#2">Электричество-m</option>
            </select>
            <select id="select3">
                <option class="2#1">Вода-i</option>
                <option class="2#2">Электричество-i</option>
            </select>
            <select id="select4">
                <option class="3#1">Вода-k</option>
                <option class="3#2">Электричество-k</option>
            </select>
            <select id="select999" style="display:none">
                <option class="1#1#1">Вода-m</option>
                <option class="1#1#2">Электричество-m</option>
                <option class="1#2#1">Вода-m</option>
                <option class="1#2#2">Электричество-m</option>
                <option class="2#1#1">Вода-i</option>
                <option class="2#1#2">Электричество-i</option>
                <option class="2#2#1">Вода-i</option>
                <option class="2#2#2">Электричество-i</option>
                <option class="3#1#1">Вода-k</option>
                <option class="3#1#2">Электричество-k</option>
                <option class="3#2#1">Вода-k</option>
                <option class="3#2#2">Электричество-k</option>
            </select>
        </div>

    <script>

        let sel=new Array()

        let selectAddress = function(selector){

            switch(selector.selectedIndex){
                case 0 :
                    sel[2].style.display = 'inline';
                    sel[3].style.display = 'none';
                    sel[4].style.display = 'none';
                    break;
                case 1 :
                    sel[2].style.display = 'none';
                    sel[3].style.display = 'inline';
                    sel[4].style.display = 'none';
                    break;         
                case 2 :
                    sel[2].style.display = 'none';
                    sel[3].style.display = 'none';
                    sel[4].style.display = 'inline';
                    break;   
                default:
                    break;             
            }
        }

        window.onload=function(){

            var ind=3

            con=document.getElementById('container')
            
            sel[1] = document.getElementById('select1')
            sel[2] = document.getElementById('select2')
            sel[3] = document.getElementById('select3')
            sel[4] = document.getElementById('select4')
            //sel[1].options[ind-1].selected=true

            sel[2].style.display = 'none';
            sel[3].style.display = 'none';
            sel[4].style.display = 'none';


            // arrangeSelects(sel[1])
        }

        function arrangeSelects(obj){
            var val = obj.options[obj.selectedIndex].className
            var ar = val.split('#')
            var count = ar.length
            if(count == 2){return false}

                for (var j=count+1; j<=3; j++){

                    if(!document.getElementById('created-selected'+j))
                    {
                        var select=document.createElement('select')
                        select.id='created-selected'+j
                        select.style.width="200px"
	                    select.style.marginTop="20px"
	                    select.onchange=function(){arrangeSelects(this)}
                    }
                    else{
                        var select=document.getElementById('created-select'+j)
                            select.innerHTML=""
                    }
                    for(var i=0; i<sel[j].options.length; i++){
                        var v=sel[j].options[i].className

                    	var h=sel[j].options[i].innerHTML
                    	var a=v.split('#')
                    	var c=0
                    	for(var k=0; k<=2; k++){
                    	    if(count>=k+1){
                    	        if(typeof(a[k])!="undefined"){
                    	            if(a[k]==ar[k]){c++}
                    	        }
                    	    }
                    	}

	                    if(c==count){
	                        o=document.createElement('option')
	                        o.className=v
	                        o.innerHTML=h
	                        select.appendChild(o)
	                    }
                        if(!document.getElementById('created-select'+j)){con.appendChild(select)}
                    }
                }
        }

    </script>
</body>
</html>